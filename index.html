<!DOCTYPE html>
<html lang="es" class="dark">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AD Music - Login</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="Archivo.css">

  <style>
    * {
      transition: all 1s ease;
    }
  </style>

</head>

<body class="bg-white dark:bg-black min-h-screen flex flex-col justify-center items-center">

  <h1 class="text-[var(--morado)] font-black text-3xl mb-6 pulse-suave">
    AD Música
  </h1>


  <article
    class="relative p-8 w-96 border-2 rounded-xl shadow-xl bg-black dark:bg-white transition-all duration-1000 flex flex-col items-center gap-6"
    style="border-color: var(--morado);">

    <button id="btnTema" class="absolute top-3 right-3 p-2 rounded-full border transition-all duration-500
                bg-black dark:bg-white" style="border-color: var(--morado);">
      <!-- Ícono SVG de paleta que cambia según el tema -->
      <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 fill-white dark:fill-black transition-all duration-500"
        viewBox="0 0 24 24">
        <path
          d="M12 2C6.486 2 2 6.038 2 11c0 3.86 2.925 7.062 7 7.877V22l4.553-3.512A9.14 9.14 0 0 0 22 11c0-4.962-4.486-9-10-9zm-4 11a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm4-3a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm4 3a2 2 0 1 1 0-4 2 2 0 0 1 0 4z" />
      </svg>
    </button>

    <!-- IMAGEN CENTRADA -->
    <img src="img/avatar.png" class="w-24 h-24 mx-auto" />

    <!-- USUARIO -->
    <div class="w-full flex flex-col gap-1">
      <label for="usuario" class="font-semibold font-black text-left" style="color: var(--morado);">
        Usuario
      </label>

      <input id="usuario" type="email" placeholder="Digite su correo..."
        class="w-full p-2 rounded bg-gray-900 dark:bg-gray-200 text-white dark:text-black outline-none" />
    </div>

    <!-- PASSWORD -->
    <div class="w-full flex flex-col gap-1">
      <label for="contrasena" class="font-semibold text-left" style="color: var(--morado);">
        Contraseña
      </label>

      <input id="contrasena" type="password"
        class="w-full p-2 rounded bg-gray-900 dark:bg-gray-200 text-white dark:text-black outline-none" />
    </div>

    <!-- BOTÓN LOGIN -->
    <button id="btnLogin" type="button" class="w-full py-2 rounded font-semibold text-black"
      style="background-color: var(--morado);">
      Iniciar sesión
    </button>

  </article>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <script>
    document.getElementById("btnLogin").addEventListener("click", async () => {

      const email = document.getElementById("usuario").value;
      const password = document.getElementById("contrasena").value;

      const res = await fetch("/api/login", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ email, password })
      });
      ;

      const data = await res.json();

      if (!res.ok) {
        alert(data.error || "Error al iniciar sesión");
        return;
      }

      // Guardar sesión (simple)
      localStorage.setItem("usuario", JSON.stringify(data.usuario));

      // Redirigir
      window.location.href = "Menu.html";
    });
  </script>


  <script src="Archive.js"></script>

</body>

</html>